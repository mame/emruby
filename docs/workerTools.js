!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var s=e();for(var i in s)("object"==typeof exports?exports:t)[i]=s[i]}}(self,(function(){return(()=>{"use strict";var t={370:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.emscriptenHack=void 0;var i=s(925);e.emscriptenHack=function(t){self.ENV&&(self.ENV.TERM="xterm-256color");var e=[],s=function(e,s){"number"==typeof s&&t.onWrite([(s+256)%256])};self.TTY.default_tty_ops.get_char=function(){0==e.length&&e.push.apply(e,t.onRead());var s=e.shift();return s>=0?s<128?s:s-256:null},self.TTY.default_tty_ops.put_char=s,self.TTY.default_tty1_ops.put_char=s,self.TTY.stream_ops.poll=function(e,s){return t.onWaitForReadable(s)?5:4};var r="dummy",a="dummy";for(var o in self.asmLibraryArg)"__syscall_ioctl"!=o&&"__sys_ioctl"!=o&&"___syscall_ioctl"!=self.asmLibraryArg[o].name&&"___sys_ioctl"!=self.asmLibraryArg[o].name||(r=o),"__syscall_newselect"!=o&&"__sys__newselect"!=o&&"___syscall__newselect"!=self.asmLibraryArg[o].name&&"___sys__newselect"!=self.asmLibraryArg[o].name||(a=o);"dummy"==r&&console.warn("failed to overwrite __syscall_ioctl of emscripten"),"dummy"==a&&console.warn("failed to overwrite __syscall_newselect of emscripten");var l=self.asmLibraryArg[r];self.asmLibraryArg[r]=function(e,s,r){switch(self.SYSCALLS.varargs=r,s){case 21505:return a=t.onIoctlTcgets(),o=self.SYSCALLS.get(),self.HEAP32.set((0,i.termiosToData)(a),o>>2),0;case 21506:case 21507:case 21508:return function(){var e=self.SYSCALLS.get(),s=Array.from(self.HEAP32.slice(e>>2,13+(e>>2)));t.onIoctlTcsets((0,i.dataToTermios)(s))}(),0;case 21515:return 0;case 21523:return function(){var e=t.onIoctlTiocgwinsz(),s=e[0],i=e[1],r=self.SYSCALLS.get()>>2;self.HEAP32[r]=i+(s<<16)}(),0;default:return l(e,s,r)}var a,o},self.asmLibraryArg[a]=function(t,e,s,i,r){try{for(var a=function(t){return t?Array.from(self.HEAP32.slice(t>>2,2+(t>>2))):[0,0]},o=function(t,e){t&&self.HEAP32.set(e,t>>2)},l=a(e),n=a(s),c=a(i),f=a(r),h=f[0],T=f[1],E=r?h+T/1e6:-1,O=0,_=function(t,e){return t[Math.floor(e/32)]&1<<e%32},C=function(t,e){t[Math.floor(e/32)]|=1<<e%32,O++},u=[0,0],I=[0,0],L=[0,0],N=0;N<t;N++){var R=self.FS.getStream(N);if(!R)throw new self.FS.ErrnoError(8);var S=R.stream_ops.poll?R.stream_ops.poll(R,E):self.SYSCALLS.DEFAULT_POLLMASK;1&S&&_(l,N)&&C(u,N),4&S&&_(n,N)&&C(I,N),2&S&&_(c,N)&&C(L,N)}return o(e,u),o(s,I),o(i,L),O}catch(t){if(void 0===self.FS||!(t instanceof self.FS.ErrnoError))throw t;return-t.errno}}}},925:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.dataToTermios=e.termiosToData=e.defaultTermios=e.Termios=e.VEOL2=e.VLNEXT=e.VWERASE=e.VDISCARD=e.VREPRINT=e.VEOL=e.VSUSP=e.VSTOP=e.VSTART=e.VSWTCH=e.VMIN=e.VTIME=e.VEOF=e.VKILL=e.VERASE=e.VQUIT=e.VINTR=e.IEXTEN=e.ECHOKE=e.ECHOPRT=e.ECHOCTL=e.NOFLSH=e.ECHONL=e.ECHOK=e.ECHOE=e.ECHO=e.ICANON=e.ISIG=e.XTABS=e.TABDLY=e.ONLRET=e.ONOCR=e.OCRNL=e.ONLCR=e.OLCUC=e.OPOST=e.IUTF8=e.IMAXBEL=e.IXANY=e.IXON=e.IUCLC=e.ICRNL=e.IGNCR=e.INLCR=e.ISTRIP=void 0,e.ISTRIP=32,e.INLCR=64,e.IGNCR=128,e.ICRNL=256,e.IUCLC=512,e.IXON=1024,e.IXANY=2048,e.IMAXBEL=8192,e.IUTF8=16384,e.OPOST=1,e.OLCUC=2,e.ONLCR=4,e.OCRNL=8,e.ONOCR=16,e.ONLRET=32,e.TABDLY=6144,e.XTABS=6144,e.ISIG=1,e.ICANON=2,e.ECHO=8,e.ECHOE=16,e.ECHOK=32,e.ECHONL=64,e.NOFLSH=128,e.ECHOCTL=512,e.ECHOPRT=1024,e.ECHOKE=2048,e.IEXTEN=32768,e.VINTR=0,e.VQUIT=1,e.VERASE=2,e.VKILL=3,e.VEOF=4,e.VTIME=5,e.VMIN=6,e.VSWTCH=7,e.VSTART=8,e.VSTOP=9,e.VSUSP=10,e.VEOL=11,e.VREPRINT=12,e.VDISCARD=13,e.VWERASE=14,e.VLNEXT=15,e.VEOL2=16;var s=function(){function t(t,s,i,r,a){this.iflag=t,this.oflag=s,this.cflag=i,this.lflag=r,this.cc=a,this.ISTRIP_P=0!=(this.iflag&e.ISTRIP),this.INLCR_P=0!=(this.iflag&e.INLCR),this.IGNCR_P=0!=(this.iflag&e.IGNCR),this.ICRNL_P=0!=(this.iflag&e.ICRNL),this.IUCLC_P=0!=(this.iflag&e.IUCLC),this.IXON_P=0!=(this.iflag&e.IXON),this.IXANY_P=0!=(this.iflag&e.IXANY),this.IUTF8_P=0!=(this.iflag&e.IUTF8),this.OPOST_P=0!=(this.oflag&e.OPOST),this.OLCUC_P=0!=(this.oflag&e.OLCUC),this.ONLCR_P=0!=(this.oflag&e.ONLCR),this.OCRNL_P=0!=(this.oflag&e.OCRNL),this.ONOCR_P=0!=(this.oflag&e.ONOCR),this.ONLRET_P=0!=(this.oflag&e.ONLRET),this.TABDLY_XTABS_P=(this.oflag&e.TABDLY)==e.XTABS,this.ISIG_P=0!=(this.lflag&e.ISIG),this.ICANON_P=0!=(this.lflag&e.ICANON),this.ECHO_P=0!=(this.lflag&e.ECHO),this.ECHOE_P=0!=(this.lflag&e.ECHOE),this.ECHOK_P=0!=(this.lflag&e.ECHOK),this.ECHONL_P=0!=(this.lflag&e.ECHONL),this.NOFLSH_P=0!=(this.lflag&e.NOFLSH),this.ECHOCTL_P=0!=(this.lflag&e.ECHOCTL),this.ECHOPRT_P=0!=(this.lflag&e.ECHOPRT),this.ECHOKE_P=0!=(this.lflag&e.ECHOKE),this.IEXTEN_P=0!=(this.lflag&e.IEXTEN),this.INTR_V=this.cc[e.VINTR],this.QUIT_V=this.cc[e.VQUIT],this.ERASE_V=this.cc[e.VERASE],this.KILL_V=this.cc[e.VKILL],this.EOF_V=this.cc[e.VEOF],this.TIME_V=this.cc[e.VTIME],this.MIN_V=this.cc[e.VMIN],this.SWTCH_V=this.cc[e.VSWTCH],this.START_V=this.cc[e.VSTART],this.STOP_V=this.cc[e.VSTOP],this.SUSP_V=this.cc[e.VSUSP],this.EOL_V=this.cc[e.VEOL],this.REPRINT_V=this.cc[e.VREPRINT],this.DISCARD_V=this.cc[e.VDISCARD],this.WERASE_V=this.cc[e.VWERASE],this.LNEXT_V=this.cc[e.VLNEXT],this.EOL2_V=this.cc[e.VEOL2]}return t.prototype.clone=function(){return new t(this.iflag,this.oflag,this.cflag,this.lflag,this.cc.concat())},t}();e.Termios=s,e.defaultTermios=new s(e.ICRNL|e.IXON|e.IMAXBEL|e.IUTF8,e.OPOST|e.ONLCR,191,e.ISIG|e.ICANON|e.ECHO|e.ECHOE|e.ECHOK|e.ECHOCTL|e.ECHOKE|e.IEXTEN,[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.termiosToData=function(t){for(var e=[t.iflag,t.oflag,t.cflag,t.lflag],s=0,i=8,r=0;r<t.cc.length;r++)s|=t.cc[r]<<i,32==(i+=8)&&(e.push(s),s=0,i=0);return e.push(s),e},e.dataToTermios=function(t){for(var e=[],i=4,r=t[i++],a=8,o=0;o<32;o++)e.push(r>>a&255),(a+=8)>=32&&(r=t[i++],a=0);return new s(t[0],t[1],t[2],t[3],e)}},933:(t,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TtyClient=void 0;var i=s(925),r=function(){function t(t){this.streamCtrl=new Int32Array(t,0,1),this.streamData=new Int32Array(t,4)}return t.prototype.req=function(t){this.streamCtrl[0]=0,self.postMessage(t),Atomics.wait(this.streamCtrl,0,0)},t.prototype.onRead=function(t){t||(t=this.streamData.length-1),this.req({ttyRequestType:"read",length:t});var e=this.streamData[0];return Array.from(this.streamData.slice(1,e+1))},t.prototype.onWrite=function(t){this.req({ttyRequestType:"write",buf:t})},t.prototype.onWaitForReadable=function(t){return this.req({ttyRequestType:"poll",timeout:t}),1==this.streamData[0]},t.prototype.onIoctlTcgets=function(){return this.req({ttyRequestType:"tcgets"}),(0,i.dataToTermios)(Array.from(this.streamData.slice(0,13)))},t.prototype.onIoctlTcsets=function(t){var e=(0,i.termiosToData)(t);this.req({ttyRequestType:"tcsets",data:e})},t.prototype.onIoctlTiocgwinsz=function(){return this.req({ttyRequestType:"tiocgwinsz"}),[this.streamData[0],this.streamData[1]]},t}();e.TtyClient=r},852:function(t,e,s){var i=this&&this.__createBinding||(Object.create?function(t,e,s,i){void 0===i&&(i=s),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,i){void 0===i&&(i=s),t[i]=e[s]}),r=this&&this.__exportStar||function(t,e){for(var s in t)"default"===s||Object.prototype.hasOwnProperty.call(e,s)||i(e,t,s)};Object.defineProperty(e,"__esModule",{value:!0}),r(s(370),e),r(s(933),e)}},e={};return function s(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,s),a.exports}(852)})()}));
//# sourceMappingURL=workerTools.js.map